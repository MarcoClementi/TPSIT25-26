<!DOCTYPE html>
<html>
<head>

<script language="JavaScript">
var oggettoJSON = { "nome": "Biblioteca", "anno": 2026, "autore": "Marco Clementi" };
    document.write("<description>Gestione libri in JSON</description>");
</script>

<style>
/* SFONDO elegante */
body {
    background: linear-gradient(45deg, lightblue, lightgreen, lightpink, lightyellow);
    background-size: 400% 400%;
    animation: sfondoElegante 10s infinite;
    font-family: Arial, sans-serif;
  
}
h1 {
    color: white;
    background-color: darkblue;
    border: 4px solid white;
    text-align: center;
    text-shadow: 2px 2px 0 black;
}
form {
    background-color: rgba(255, 255, 255, 0.8);
    padding: 15px;
    border: 2px solid gray;
    border-radius: 10px;
    width: 350px;
    margin: auto;
}
input, select {
    display: block;
    margin: 10px 0;
    width: 300px;
    font-size: 16px;
    padding: 5px;
    border: 2px solid gray;
    border-radius: 5px;
}
input[type="submit"] {
    background: linear-gradient(blue, lightblue);
    color: white;
    font-weight: bold;
    cursor: pointer;
    border: none;
    border-radius: 5px;
    padding: 10px;
}
a {
    color: darkblue;
    text-decoration: none;
}
@keyframes sfondoElegante {
    0% {background-position: 0% 50%;}
    50% {background-position: 100% 50%;}
    100% {background-position: 0% 50%;}
}
@keyframes pulsanteAnimato {
    0% {transform: scale(1);}
    50% {transform: scale(1.1);}
    100% {transform: scale(1);}

}
</style>
</head>

<form id="form1" onsubmit="salva_dati(event)"> 
<script>
var libri = []; // array globale lista ordinata

function salva_dati(event) { 
    event.preventDefault(); // previene il comportamento predefinito del form

    var nome = document.querySelector('input[name="nome"]').value.trim(); // prendo i valori dai campi del form
    var autore = document.querySelector('input[name="autore"]').value.trim(); // rimuovo spazi bianchi
    var genere = document.querySelector('select[name="genere"]').value; // prendo il valore selezionato

    // Oggetto libro
    var libro = {
        nome: nome,
        autore: autore,
        genere: genere
    };

    // Controllo se il libro esiste gi√†
    var trovato = false;

    for (var i = 0; i < libri.length; i++) {
        if (libri[i].nome === nome && libri[i].autore === autore) {
            // MODIFICA libro esistente
            libri[i].genere = genere;
            trovato = true;
            break;
        }
    }

    // Se non esiste, lo aggiungo
    if (!trovato) {
        libri.push(libro);
    }

    // Creo file JSON aggiornato
    var json = JSON.stringify(libri, null, 4);
    var blob = new Blob([json], { type: "application/json" });
    var url = URL.createObjectURL(blob);

    var a = document.createElement("a");
    a.href = url;
    a.download = "libri.json";
    a.click();

    URL.revokeObjectURL(url);

    alert(trovato ? "Libro modificato ‚úèÔ∏è" : "Libro aggiunto üìö");
    document.getElementById("form1").reset();
}
</script>

    <body>
    <h1 style="background-color:rgb(0, 16, 241);">Biblioteca</h1>
    <form id="form1" onsubmit="salva_dati(event)">
    <input name="nome" type="text" placeholder="Inserisci il nome del libro">
    <input name="autore" type="text" placeholder="Inserisci l'autore del libro">
    <select name="genere" id="genere" style="width:150px;">
        <option value="Fantasy">Fantasy</option>
        <option value="Horror">Horror</option>
        <option value="Romantico">Romantico</option>
        <option value="Storico">Storico</option>
        <option value="Giallo">Giallo</option>
    <input name="invia" type="submit" value="Invia" style="width: 150px;" style="background-color:rgb(255, 0, 0);">
    </select>
    <a href="https://classroom.google.com/c/ODA2Mjk2NzA0MTIx/a/ODQwMDg5NTgwNjc2/details">Visita classroom</a>
</form>
    </body>
    <script language="JavaScript">
 document.write("<footer>Anno: " + oggettoJSON.anno + " - Autore: " + oggettoJSON.autore + "</footer>"); // Inserisce il footer con anno e autore
</script>
</html>